import{a as ee}from"./chunk-ISWHXR5X.js";import{a as re,c as Y}from"./chunk-KMMM7LTP.js";import{f as Q,h as X}from"./chunk-25NNDTFO.js";import{b as Z}from"./chunk-HOXLKUOK.js";import{b as j,d as T,e as O,f as x,h as G,j as N,l as L,m as V,n as q,o as W,p as $,s as z,t as H}from"./chunk-DS4W2E5P.js";import{a as K}from"./chunk-DORSZTD2.js";import{a as J}from"./chunk-T6WYW2DS.js";import{Ab as r,Bb as a,Ca as w,Cb as M,Jb as c,Jc as P,Kb as R,Tb as n,Ub as v,Xb as E,Ya as l,Yb as F,Z as m,Zb as B,_b as D,ac as b,ca as g,da as _,ja as p,ob as A,qb as f,vb as S,wb as U,yb as I,zb as k}from"./chunk-P2XP77ST.js";import{g as oe}from"./chunk-P2VZOJAX.js";var le=(()=>{class t{constructor(e){this._seguridadGateWay=e}ListarusUarios(){return this._seguridadGateWay.ListarUsuarios()}static{this.\u0275fac=function(i){return new(i||t)(g(J))}}static{this.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var h=class{constructor(){this.rucempresa="",this.idcarga=0,this.usuarioasignado=""}};var te=(()=>{class t{constructor(e){this.inventariosService=e}updateUsuarioAsignado(e){return this.inventariosService.updateUsuarioAsignado(e)}static{this.\u0275fac=function(i){return new(i||t)(g(Z))}}static{this.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var u=oe(re());function ae(t,C){if(t&1&&(r(0,"option",18),n(1),a()),t&2){let e=R().$implicit;f("value",e.idusuario),l(),E("",e.idusuario," - ",e.nombreusuario," ",e.apellido,"")}}function ne(t,C){if(t&1&&A(0,ae,2,4,"option",18),t&2){let e=C.$implicit;S(0,e.estado=="1"?0:-1)}}var Se=(()=>{class t{constructor(){this.getUsuarios_All=[],this.rucEmpresa="",this.idCarga=0,this.usuarios=[],this.requUser={},this.UsuarioAsignado="",this.Inventario="",this.updateUsuarioAsignadoUseCase=_(te),this.selectedUsuarioId=null,this.currentDate=new Date().toLocaleDateString(),this.inventario=new ee,this.usuarioAsignado=new h,this.formularioRegistro=new x({})}validacionUsuarioAsignacion(){this.UsuarioAsignado?this.Alert_AsignarUsuario(this.Inventario,this.UsuarioAsignado):this.onAsignarUsuario()}onAsignarUsuario(){let e=this.requUser;e.idcarga=this.idCarga,e.rucempresa=this.rucEmpresa.toString(),e.usuarioasignado=this.inventario.idusuario.toString(),this.updateUsuarioAsignadoUseCase.updateUsuarioAsignado(e).subscribe(i=>{i.exito&&this.mensajeValidacionRegistroCorrecto(i),i.exito||this.mensajeValidacionRegistroIncorrecto(i.msgerror)})}mensajeValidacionRegistroCorrecto(e){let i=e?.message||"Inventario reasignado correctamente.";u.default.fire({icon:"success",title:"\xA1\xC9xito!",html:`
        <p class="text-gray-700 text-lg font-medium text-center px-4 leading-relaxed">
          ${i}
        </p>

        <p class="text-gray-500 text-sm text-center mt-2">
          La p\xE1gina se recargar\xE1 autom\xE1ticamente...
        </p>
      `,background:"#ffffff",customClass:{popup:"swal-custom-popup",title:"text-green-600 font-bold text-xl"},showConfirmButton:!1,timer:2500,didClose:()=>{window.location.reload()}})}mensajeValidacionRegistroIncorrecto(e){let i=e?e.msgerror:"Error al asignar";u.default.fire(e,i,"error").then(()=>{window.location.reload()})}cerrarRegistro(){this.formularioRegistro.reset(),this.formularioRegistro.markAsPristine(),this.formularioRegistro.markAsUntouched()}Alert_AsignarUsuario(e,i){let o=3;u.default.fire({title:`
          <div class="text-blue-600 text-2xl font-bold flex items-center justify-center">
            <span>Reasignar Usuario</span>
          </div>
        `,html:`
          <div class="border-b border-gray-300 pb-4">
            <p class="text-gray-700 text-lg text-center">
              \xBFSeguro que deseas reasignar el inventario
              <span class="font-bold text-blue-500">${e}</span>
              al usuario
              <span class="font-bold text-blue-500">${i}</span>?
            </p>
          </div>

          <div class="mt-2 text-center space-y-3">
            <p class="text-gray-600 text-sm">Esta acci\xF3n actualizar\xE1 la asignaci\xF3n del usuario.</p>
          </div>

          <!-- Contenedor de botones -->
          <div id="swal-buttons" class="flex justify-center gap-4 mt-5">
            <button id="cancel-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold px-4 py-2 rounded w-36">
              Cancelar
            </button>
            <button id="confirm-btn" class="bg-blue-600 text-white font-semibold px-4 py-2 rounded w-36" disabled>
              Reasignar (3)
            </button>
          </div>
        `,icon:"warning",showConfirmButton:!1,showCancelButton:!1,didOpen:()=>{let d=document.getElementById("cancel-btn"),s=document.getElementById("confirm-btn");d&&(d.onclick=()=>u.default.close());let ie=setInterval(()=>{o--,s.textContent=`Reasignar (${o})`,o===0&&(clearInterval(ie),s.textContent="Reasignar",s.disabled=!1,s.classList.add("hover:bg-blue-700"))},1e3);s&&(s.onclick=()=>{u.default.close(),this.onAsignarUsuario()})}})}ngOnInit(){this.formularioRegistro=new x({usuario:new G("",[j.required])})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["registro-asignar-page"]],inputs:{getUsuarios_All:"getUsuarios_All",rucEmpresa:"rucEmpresa",idCarga:"idCarga",usuarios:"usuarios",requUser:"requUser",UsuarioAsignado:"UsuarioAsignado",Inventario:"Inventario"},standalone:!0,features:[b],decls:32,vars:5,consts:[["id","staticBackdrop","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-2xl","border","border-gray-200","shadow-lg","overflow-hidden"],[1,"modal-header","bg-gradient-to-r","from-blue-600","to-blue-500","text-white","py-3","px-6","relative"],[1,"w-full","text-center"],[1,"text-xs","font-semibold","text-left","mb-0","uppercase","tracking-widest","opacity-90"],[1,"text-2xl","uppercase","text-left","tracking-widest","font-bold","mt-1"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"absolute","top-4","right-4","text-white","text-xl","opacity-80","hover:opacity-100","transition-all","transform","hover:scale-110",3,"click"],[1,"modal-body","bg-white","px-6","py-3"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-xs","text-left","text-gray-500","uppercase","font-medium"],[1,"block","text-lg","text-left","font-semibold","text-blue-600"],["for","usuarioAsignar",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","usuarioAsignar","formControlName","usuario",1,"w-full","p-3","bg-white","text-gray-800","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-400","focus:outline-none","transition","shadow-sm",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[1,"mt-8","flex","justify-end","gap-4"],["type","button","data-bs-dismiss","modal",1,"px-5","py-2","text-gray-600","bg-gray-200","rounded-lg","transition","hover:bg-gray-300",3,"click"],["type","submit",1,"px-5","py-2","text-white","rounded-lg","transition","disabled:bg-gray-400","disabled:cursor-not-allowed","bg-gradient-to-r","from-blue-600","to-blue-500","hover:scale-105","hover:shadow-md",3,"disabled"],[3,"value"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),n(6,"Asignar Inventario"),a(),r(7,"h2",6),n(8),a()(),r(9,"button",7),c("click",function(){return o.cerrarRegistro()}),n(10,"\u2716"),a()(),r(11,"div",8)(12,"form",9),c("ngSubmit",function(){return o.validacionUsuarioAsignacion()}),r(13,"div")(14,"span",10),n(15,"Asignaci\xF3n actual:"),a(),r(16,"span",11),n(17),a()(),M(18,"br"),r(19,"div")(20,"label",12),n(21,"Seleccionar Usuario"),a(),r(22,"select",13),D("ngModelChange",function(s){return B(o.inventario.idusuario,s)||(o.inventario.idusuario=s),s}),r(23,"option",14),n(24,"Seleccione un usuario"),a(),I(25,ne,1,1,null,null,U),a()(),r(27,"div",15)(28,"button",16),c("click",function(){return o.cerrarRegistro()}),n(29,"Cancelar"),a(),r(30,"button",17),n(31," Guardar "),a()()()()()()()),i&2&&(l(8),v(o.Inventario),l(4),f("formGroup",o.formularioRegistro),l(5),v(o.UsuarioAsignado||"Sin asignaci\xF3n"),l(5),F("ngModel",o.inventario.idusuario),l(3),k(o.getUsuarios_All),l(5),f("disabled",o.formularioRegistro.invalid||!o.formularioRegistro.controls.usuario.value))},dependencies:[P,H,N,W,$,q,T,O,L,V,Q,X,Y,z],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.Buttons_eventos[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.Buttons_eventos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.button_cancelar[_ngcontent-%COMP%]{padding:.625rem 1rem;display:inline-flex;justify-content:center;align-items:center;gap:.5rem;font-size:.875rem;font-weight:500;border-radius:.5rem;border:1px solid transparent;background-color:transparent;color:var(--color-principal-5);transition:background-color .2s}.Buttons_eventos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:var(--color-principal-3);color:#fff}"]})}}return t})();var Fe=(()=>{class t{constructor(){this.rucempresa="",this.idcarga=0,this.obtenerDetalle=new w}ObtenerDetalleInventarios(){this.obtenerDetalle.emit({rucempresa:this.rucempresa,idcarga:this.idcarga})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["td-table-btn-detalle"]],inputs:{rucempresa:"rucempresa",idcarga:"idcarga"},outputs:{obtenerDetalle:"obtenerDetalle"},standalone:!0,features:[b],decls:3,vars:0,consts:[["type","button","data-bs-toggle","offcanvas","data-bs-target","#hs-detalles-inventario","aria-controls","hs-detalles-inventario",1,"flex","shrink-0","justify-center","items-center","gap-2","size-11","text-sm","font-medium","rounded-lg","border-transparent","bg-white","text-blue-700","hover:bg-blue-700","focus:outline-hidden","focus:bg-blue-700","disabled:opacity-50","disabled:pointer-events-none",3,"click"],[1,"text-blue-600]"]],template:function(i,o){i&1&&(r(0,"button",0),c("click",function(){return o.ObtenerDetalleInventarios()}),r(1,"mat-icon",1),n(2,"visibility"),a()())},dependencies:[K]})}}return t})();export{le as a,Se as b,Fe as c};
